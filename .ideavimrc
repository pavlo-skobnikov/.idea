" -> https://github.com/JetBrains/ideavim/wiki
""""" OPTIONS

" Use Vim as default handling for (almost) Vim shortcuts
sethandler a:vim
sethandler <C-y> a:ide

" Use Intellij's line joining behaviour
set ideajoin

" <SPC> as the leader key
let mapleader = " "

" Show Current Vim Mode
set showmode

" Use the Clipboard Register '*' for All Yank, Delete, Change and Put Operations
" (-> which would normally go to the unnamed register)
set clipboard+=unnamed

" Search as Characters are Entered
set incsearch

" Highlight Search Results
set hlsearch

" Case-sensitive Search Only on Present Upper Letters
set ignorecase
set smartcase

" Relative Numbers Only Club
set relativenumber

""""" PLUGINS & RELATED SETTINGS

"" PLUGIN
" Enable which-key extension
set which-key

" Disable which-key timeout, i.e. show the menu until you press a key
set notimeout

" Show the menu also for default Vim actions like `gg` or `zz`.
let g:WhichKey_ShowVimActions = "false"

"" PLUGIN
" Vim Movement in the Project View
" -> https://github.com/JetBrains/ideavim/wiki/NERDTree-support
set NERDTree

"" PLUGIN
" Emulate vim-surround. Commands: ys, cs, ds
" -> https://github.com/tpope/vim-surround/blob/master/doc/surround.txt
set surround

"" PLUGIN

" Add text object for arguments: aA (around arguments), iA (inside arguments)
set argtextobj

" MAPPINGS

" MISCELLANEOUS

" Increase/decrease selection
vnoremap ; :action EditorSelectWord<CR>
vnoremap , :action EditorUnSelectWord<CR>

" Easy window navigation
nnoremap <C-h> <C-w>h
nnoremap <C-j> <C-w>j
nnoremap <C-k> <C-w>k
nnoremap <C-l> <C-w>l

" Remove highlights on <ESC>
nnoremap <esc> :noh<CR>

" Center screen on movement
nnoremap <C-d> <C-d>zz
nnoremap <C-u> <C-u>zz

" Replace multiple successive whitespaces with a single space
let g:WhichKeyDesc_TrimWhitespaceDelete = "d<space> Trim whitespace"
nnoremap d<space> f<space>diwi<space><esc>

let g:WhichKeyDesc_TrimWhitespaceChange = "c<space> Trim whitespace"
nnoremap c<space> f<space>diwi<space>

" Deleting and pasting without replacing the unnamed register
let g:WhichKeyDesc_DeleteWithoutCopy = "<leader>d Delete without copying"
vnoremap <leader>d "_d

let g:WhichKeyDesc_PasteWithoutCopy = "<leader>p Paste without copying"
nnoremap <leader>p "_dP

" Explorer
nnoremap - :action SelectInProjectView<CR>

" COMMENT
let g:WhichKeyDesc_CommentByBlockComment = "gb Comment by Block Comment"
nnoremap gb :action CommentByBlockComment<CR>
vnoremap gb :action CommentByBlockComment<CR>

let g:WhichKeyDesc_CommentByLineComment = "gc Comment by Line Comment"
nnoremap gc :action CommentByLineComment<CR>
vnoremap gc :action CommentByLineComment<CR>

" [] CODE NAVIGATION
let g:WhichKeyDesc_MethodUp = "[f Previous Function"
nnoremap [f :action MethodUp<CR>

let g:WhichKeyDesc_MethodDown = "]f Next Function"
nnoremap ]f :action MethodDown<CR>

" <leader> MISCELLANEOUS
let g:WhichKeyDesc_ReformatCode = "<leader>= Reformat Code"
nnoremap <leader>= :action ReformatCode<CR>
vnoremap <leader>= :action ReformatCode<CR>

let g:WhichKeyDesc_HideAllWindows - "<leader>- Hide All Tool Windows"
nnoremap <leader>- :action HideAllWindows<CR>

" LSP

" Get Minimal Parameter Info
nnoremap <C-S-k> :action ParameterInfo<CR>
inoremap <C-S-k> :action ParameterInfo<CR>

" Next/Previous Diagnostic
let g:WhichKeyDesc_GotoNextError = "]d Next diagnostic"
nnoremap ]d :action GotoNextError<CR>

let g:WhichKeyDesc_GotoPreviousError = "[d Previous diagnostic"
nnoremap [d :action GotoPreviousError<CR>

" Go to LSP capability actions
let g:WhichKeyDesc_GotoLspActions = "gl +lsp"

let g:WhichKeyDesc_GotoTypeDeclaration = "glt Go to type definition"
nnoremap glt :action GotoTypeDeclaration<CR>

let g:WhichKeyDesc_GotoImplementation = "gli Go to implementation"
nnoremap gli :action GotoImplementation<CR>

let g:WhichKeyDesc_GotoSuperMethod = "gls Go to super"
nnoremap gls :action GotoSuperMethod<CR>

" Refactor LSP capability actions
let g:WhichKeyDesc_ShowIntentionActions = "<leader>ra Code actions"
nnoremap <leader>ra :action ShowIntentionActions<CR>

let g:WhichKeyDesc_Refactorings_QuickListPopupAction = "<leader>rl Code lens"
nnoremap <leader>rl :action Refactorings.QuickListPopupAction<CR>

let g:WhichKeyDesc_RenameElement = "<leader>rn Rename"
nnoremap <leader>rn :action RenameElement<CR>

let g:WhichKeyDesc_HighlightUsagesInFile = "<leader>rh Highlight symbol"
nnoremap <leader>rh :action HighlightUsagesInFile<CR>

let g:WhichKeyDesc_ShowErrorDescription = "<leader>rf Open float"
nnoremap <leader>rf :action ShowErrorDescription<CR>

let g:WhichKeyDesc_FindUsages = "<leader>rr Search references"
nnoremap <leader>rr :action FindUsages<CR>

let g:WhichKeyDesc_FileStructurePopup = "<leader>rd Search document symbols"
nnoremap <leader>rd :action FileStructurePopup<CR>

let g:WhichKeyDesc_GotoSymbol = "<leader>rw Search workspace symbols"
nnoremap <leader>rw :action GotoSymbol<CR>

let g:WhichKeyDesc_Generate = "<leader>rg Generate"
nnoremap <leader>rg :action Generate<CR>

let g:WhichKeyDesc_OptimizeImports = "<leader>ro Organize imports"
nnoremap <leader>ro :action OptimizeImports<CR>

"" COPILOT
let g:WhichKeyDesc_CopilotChatShow = "<leader>c Show Copilot chat"
nnoremap <leader>c :action copilot.chat.show<CR>

"" Debug
let g:WhichKeyDesc_Debug = "<leader>d +debug"

let g:WhichKeyDesc_ActivateDebugToolWindow = "<leader>dd DAP UI"
nnoremap <leader>dd :action ActivateDebugToolWindow<CR>

" Debug Run/Continue mappings
let g:WhichKeyDesc_RunMappings = "<leader>dr +run"

let g:WhichKeyDesc_Continue = "<leader>drc Continue"
nnoremap <leader>drc :action Debug<CR>

" Debug Step mappings
let g:WhichKeyDesc_DebugStepMappings = "<leader>ds +step"

let g:WhichKeyDesc_RunToCursor = "<leader>dsn Run to cursor"
nnoremap <leader>dsc :action RunToCursor<CR>

let g:WhichKeyDesc_StepOver = "<leader>dsn Step next"
nnoremap <leader>dsn :action StepOver<CR>

let g:WhichKeyDesc_StepInto = "<leader>dsi Step into"
nnoremap <leader>dsi :action StepInto<CR>

let g:WhichKeyDesc_StepOut = "<leader>dso Step out"
nnoremap <leader>dso :action StepOut<CR>

" Debug Breakpoint mappings
let g:WhichKeyDesc_DebugBreakpointMappings = "<leader>db +breakpoint"

let g:WhichKeyDesc_AddBreakpoint = "<leader>dbb Toggle breakpoint"
nnoremap <leader>dbb :action AddBreakpoint<CR>

let g:WhichKeyDesc_RemoveAllBreakpointsInFile = "<leader>dbr Remove all breakpoints in file"
nnoremap <leader>dbr :action Debugger.RemoveAllBreakpointsInFile<CR>

let g:WhichKeyDesc_AddConditionalBreakpoint = "<leader>dbc Toggle conditional breakpoint"
nnoremap <leader>dbc :action AddConditionalBreakpoint<CR>

" Debug Find mappings
let g:WhichKeyDesc_DebugFind = "<leader>df +find"

let g:WhichKeyDesc_ViewBreakpoints = "<leader>dfb Breakpoints"
nnoremap <leader>dfb :action ViewBreakpoints<CR>

" Find
let g:WhichKeyDesc_Find = "<leader>f +find"

let g:WhichKeyDesc_GotoFile = "<leader>ff All files"
nnoremap <leader>ff :action GotoFile<CR>

let g:WhichKeyDesc_RecentFiles = "<leader>fF Recent files"
nnoremap <leader>fF :action RecentFiles<CR>

let g:WhichKeyDesc_FindInPath = "<leader>fg grep"
nnoremap <leader>fg :action FindInPath<CR>

let g:WhichKeyDesc_GotoAction = "<leader>fc Command && run"
nnoremap <leader>fc :action GotoAction<CR>

" Git
let g:WhichKeyDesc_Vcs_Show_Local_Changes = "<leader>g Changes"
nnoremap <leader>g :action Vcs.Show.Local.Changes<CR>

" Hunks
let g:WhichKeyDesc_RightSquareBracket_VcsShowNextChangeMarker = "]c Next change"
nnoremap ]c :action VcsShowNextChangeMarker<CR>

let g:WhichKeyDesc_LeftSquareBracket_VcsShowPrevChangeMarker = "[c Previous change"
nnoremap [c :action VcsShowPrevChangeMarker<CR>

let g:WhichKeyDesc_Hunks = "<leader>h +hunks"

let g:WhichKeyDesc_Hunks_RollbackChangedLines = "<leader>hr Reset hunk"
nnoremap <leader>hr :action Vcs.RollbackChangedLines<CR>
vnoremap <leader>hr :action Vcs.RollbackChangedLines<CR>

" Harpoon
let g:WhichKeyDesc_AddToHarpoon = "<leader>a Add to Harpoon"
nnoremap <leader>a :action AddToHarpoon<CR>

let g:WhichKeyDesc_ShowHarpoon = "<leader>l Show Harpoon"
nnoremap <leader>l :action ShowHarpoon<CR>

let g:WhichKeyDesc_GotoHarpoon1 = "g1 Go to Harpoon 1"
nnoremap g1 :action GotoHarpoon1<CR>

let g:WhichKeyDesc_GotoHarpoon2 = "g2 Go to Harpoon 2"
nnoremap g2 :action GotoHarpoon2<CR>

let g:WhichKeyDesc_GotoHarpoon3 = "g3 Go to Harpoon 3"
nnoremap g3 :action GotoHarpoon3<CR>

let g:WhichKeyDesc_GotoHarpoon4 = "g4 Go to Harpoon 4"
nnoremap g4 :action GotoHarpoon4<CR>

let g:WhichKeyDesc_GotoHarpoon5 = "g5 Go to Harpoon 5"
nnoremap g5 :action GotoHarpoon5<CR>
